---
sidebar_position: 5
title: 12 Tuning Strategies for RAG Applications
description: This page provides a comprehensive guide on 12 tuning strategies to optimize the performance of Retrieval-Augmented Generation (RAG) applications.
keywords: [RAG, Retrieval-Augmented Generation, tuning strategies, machine learning, data science, performance optimization]
slug: /rag-for-llms/rag-tuning-strategies/
---
# ğŸŸ¡  RAGåº”ç”¨çš„12ç§è°ƒä¼˜ç­–ç•¥æŒ‡å—

> ğŸ˜€ [åŸæ–‡](https://towardsdatascience.com/a-guide-on-12-tuning-strategies-for-production-ready-rag-applications-7ca646833439#a5e2)
> ä½œè€…ï¼šLeonie Monigatti
> è½¬å‘ï¼šæ¬£

æ•°æ®ç§‘å­¦æ˜¯ä¸€é—¨å®éªŒæ€§ç§‘å­¦ã€‚å®ƒå§‹äºâ€œæ— å…è´¹åˆé¤å®šç†â€ï¼Œå³ä¸å­˜åœ¨é€‚ç”¨äºæ¯ä¸ªé—®é¢˜çš„é€šç”¨ç®—æ³•ã€‚å› æ­¤ï¼Œæ•°æ®ç§‘å­¦å®¶ä»¬ä½¿ç”¨[å®éªŒè·Ÿè¸ªç³»ç»Ÿ](https://medium.com/@iamleonie/intro-to-mlops-experiment-tracking-for-machine-learning-858e432bd133)æ¥å¸®åŠ©è°ƒæ•´ä»–ä»¬æœºå™¨å­¦ä¹ é¡¹ç›®çš„è¶…å‚æ•°ï¼Œä»¥å®ç°æœ€ä½³æ€§èƒ½ã€‚

æœ¬æ–‡ä»æ•°æ®ç§‘å­¦å®¶çš„è§’åº¦å®¡è§†äº†ä¸€ç§æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval-Augmented Generationï¼Œä»¥ä¸‹ç®€ç§°RAGï¼‰ï¼Œè®¨è®ºäº†ä¸€äº›æ½œåœ¨çš„â€œè¶…å‚æ•°â€â€”â€”æ‚¨å¯ä»¥é€šè¿‡è°ƒæ•´å®ƒæé«˜RAGæµç¨‹çš„æ€§èƒ½ã€‚ç±»ä¼¼äºæ·±åº¦å­¦ä¹ ä¸­çš„å®éªŒï¼Œæ•°æ®å¢å¼ºæŠ€æœ¯ä¸æ˜¯è¶…å‚æ•°ï¼Œè€Œæ˜¯æ‚¨å¯ä»¥è°ƒæ•´å’Œå®éªŒçš„æ—‹é’®ï¼Œæœ¬æ–‡è¿˜å°†æ¶µç›–æ‚¨å¯ä»¥åº”ç”¨çš„ä¸åŒç­–ç•¥ï¼Œè¿™äº›ç­–ç•¥å¹¶éä¸¥æ ¼æ„ä¹‰ä¸Šçš„è¶…å‚æ•°ã€‚

è¿™ç¯‡æ–‡ç« æŒ‰å…¶ç›¸å…³é˜¶æ®µåˆ—ä¸¾äº†ä»¥ä¸‹RAGæµç¨‹çš„â€œè¶…å‚æ•°â€ã€‚åœ¨**æ•°æ®ç´¢å¼•**é˜¶æ®µï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°æ€§èƒ½æå‡ï¼š

1. æ•°æ®æ¸…æ´—
2. åˆ†å—
3. åµŒå…¥æ¨¡å‹
4. å…ƒæ•°æ®
5. å¤šç´¢å¼•
6. ç´¢å¼•ç®—æ³•

åœ¨**æ¨ç†é˜¶æ®µ**ï¼ˆæ£€ç´¢å’Œç”Ÿæˆï¼‰ï¼Œæ‚¨å¯ä»¥è€ƒè™‘è°ƒæ•´ä»¥ä¸‹å†…å®¹ï¼š

1. æŸ¥è¯¢è½¬æ¢
2. æ£€ç´¢å‚æ•°
3. é«˜çº§æ£€ç´¢ç­–ç•¥
4. é‡æ–°æ’åºæ¨¡å‹
5. è¯­è¨€æ¨¡å‹å¾®è°ƒ
6. æç¤ºå·¥ç¨‹

è¯·æ³¨æ„ï¼Œæœ¬æ–‡çš„ç”¨ä¾‹æ˜¯åŸºäºæ–‡æœ¬ç±»çš„RAGåº”ç”¨ã€‚å¯¹äºå¤šæ¨¡æ€çš„RAGåº”ç”¨ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘å…¶ä»–ä¸åŒçš„å› ç´ ã€‚

## æ•°æ®ç´¢å¼•

æ•°æ®ç´¢å¼•é˜¶æ®µæ˜¯æ„å»ºRAGçš„å‡†å¤‡æ­¥éª¤ï¼Œç±»ä¼¼äºæœºå™¨å­¦ä¹ ä¸­çš„æ•°æ®æ¸…æ´—å’Œé¢„å¤„ç†ã€‚æ•°æ®ç´¢å¼•é˜¶æ®µé€šå¸¸åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š

1. **æ•°æ®æ”¶é›†**
2. **åˆ†å—ï¼š**å°†å¤§é‡æ•°æ®åˆ†å‰²æˆè¾ƒå°çš„å—ï¼Œä»¥ä¾¿æ›´æœ‰æ•ˆåœ°å¤„ç†å’Œç®¡ç†æ•°æ®ã€‚
3. **å‘é‡åŒ–ï¼š** ä½¿ç”¨åµŒå…¥æ¨¡å‹å°†æ¯ä¸ªæ•°æ®å—è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºè¿™æœ‰åŠ©äºåœ¨åç»­çš„æ£€ç´¢å’Œç”Ÿæˆé˜¶æ®µä¸­å¤„ç†å’Œåˆ†ææ–‡æœ¬ã€‚
4. **å­˜å‚¨ï¼š**å°†ç”Ÿæˆçš„å‘é‡å’Œç›¸åº”çš„æ•°æ®å—å­˜å‚¨åœ¨å‘é‡æ•°æ®åº“ä¸­ã€‚

![](https://cdn.jsdelivr.net/gh/donttal/imgbed/img/936bcbbc53dfb95e2a2e55ee5446adcb.webp)

### æ•°æ®æ¸…æ´—

æ•°æ®è´¨é‡åœ¨RAGä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚åœ¨è¿›è¡Œä»¥ä¸‹ä»»ä½•æ­¥éª¤ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„æ•°æ®ç¬¦åˆä»¥ä¸‹æ ‡å‡†ï¼š

- æ•´æ´ï¼šè¯·åº”ç”¨ä¸€äº›åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­å¸¸ç”¨çš„æ•°æ®æ¸…æ´—æ–¹æ³•ã€‚ä¾‹å¦‚ç¡®ä¿æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦è¢«æ­£ç¡®ç¼–ç ã€‚
- æ­£ç¡®ï¼šç¡®ä¿ä¿¡æ¯çš„ä¸€è‡´æ€§ä¸å‡†ç¡®æ€§ï¼Œé¿å…å¯èƒ½æ··æ·†è¯­è¨€æ¨¡å‹çš„å†²çªä¿¡æ¯ã€‚

### åˆ†å—

åœ¨RAGä¸­ï¼Œå¯¹æ–‡æ¡£è¿›è¡Œåˆ‡å—æ˜¯å¤„ç†å¤–éƒ¨çŸ¥è¯†æºçš„ä¸€é¡¹é‡è¦æ­¥éª¤ï¼Œä¼šæ¥å½±å“æ€§èƒ½ã€‚åˆ†å—æ˜¯ä¸€ç§ç”Ÿæˆæœ‰é€»è¾‘å…³è”çš„ä¿¡æ¯ç‰‡æ®µçš„æŠ€å·§ï¼Œé€šå¸¸åšæ³•æ˜¯é€šè¿‡å°†é•¿æ–‡æ¡£åˆ†å‰²æˆå°èŠ‚ï¼ˆä¹Ÿå¯ä»¥å°†å°ç‰‡æ®µç»„åˆæˆæ®µè½ï¼‰ã€‚

**åˆ†å—æŠ€æœ¯**æ˜¯å½±å“åˆ†å—æ•ˆæœçš„ä¸€ä¸ªå› ç´ ã€‚ä¾‹å¦‚ï¼Œåœ¨LangChainä¸­ï¼Œä¸åŒçš„æ–‡æœ¬æ‹†åˆ†å™¨æ ¹æ®ä¸åŒçš„é€»è¾‘æ‹†åˆ†æ–‡æ¡£ï¼Œæ¯”å¦‚æŒ‰å­—ç¬¦ã€æ ‡è®°ç­‰ã€‚è¿™è¦æ ¹æ®ä½ çš„æ•°æ®ç±»å‹æ¥å†³å®šã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„è¾“å…¥æ•°æ®æ˜¯ä»£ç ï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦ä½¿ç”¨ä¸åŒçš„åˆ‡å—æŠ€æœ¯ï¼›è€Œå¦‚æœæ˜¯Markdownæ–‡ä»¶ï¼Œå¯èƒ½éœ€è¦å¦ä¸€ç§æŠ€æœ¯ã€‚

**åˆ†å—é•¿åº¦**ï¼ˆchunk_sizeï¼‰ä¹Ÿè¦å…·ä½“æƒ…å†µå…·ä½“åˆ†æï¼šå¦‚æœä½ çš„ä½¿ç”¨åœºæ™¯æ˜¯é—®ç­”ï¼Œå¯èƒ½éœ€è¦æ›´çŸ­çš„ã€æ›´å…·ä½“çš„åˆ‡å—ï¼›ä½†å¦‚æœæ˜¯æ‘˜è¦ï¼Œå¯èƒ½éœ€è¦æ›´é•¿çš„åˆ‡å—ã€‚æ­¤å¤–ï¼Œå¦‚æœä¸€ä¸ªåˆ‡å—å¤ªçŸ­ï¼Œå¯èƒ½ä¸åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœåˆ‡å—å¤ªé•¿ï¼Œå¯èƒ½åŒ…å«å¤ªå¤šä¸ç›¸å…³çš„ä¿¡æ¯ã€‚

å¦å¤–ï¼Œè¿˜éœ€è¦è€ƒè™‘åœ¨åˆ‡å—ä¹‹é—´å¼•å…¥ä¸€äº›é¢å¤–ä¸Šä¸‹æ–‡çš„â€œæ»šåŠ¨çª—å£â€ï¼ˆé‡å ï¼‰ï¼Œæ¥æé«˜ä¿¡æ¯è¿è´¯æ€§ã€‚

### åµŒå…¥

åµŒå…¥æ¨¡å‹æ˜¯æ£€ç´¢çš„æ ¸å¿ƒã€‚åµŒå…¥çš„è´¨é‡ç›´æ¥å½±å“æ£€ç´¢ç»“æœã€‚é€šå¸¸æ¥è¯´ï¼Œç”Ÿæˆçš„åµŒå…¥çš„ç»´åº¦è¶Šé«˜ï¼ŒåµŒå…¥çš„ç²¾åº¦å°±è¶Šé«˜ã€‚

å…³äºå¯ç”¨çš„æ›¿ä»£åµŒå…¥æ¨¡å‹ï¼Œå¯ä»¥å‚è€ƒå¤§è§„æ¨¡æ–‡æœ¬åµŒå…¥åŸºå‡†ï¼ˆMassive Text Embedding Benchmarkï¼ŒMTEBï¼‰æ’è¡Œæ¦œï¼Œè¯¥æ’è¡Œæ¦œæ¶µç›–äº†164ä¸ªæ–‡æœ¬åµŒå…¥æ¨¡å‹ï¼ˆæˆªè‡³æœ¬æ–‡æ’°å†™æ—¶ï¼‰ã€‚

è™½ç„¶ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨é€šç”¨åµŒå…¥æ¨¡å‹ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯¹åµŒå…¥æ¨¡å‹è¿›è¡Œå¾®è°ƒä»¥é€‚åº”ç‰¹å®šç”¨ä¾‹å¯èƒ½æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥é¿å…åæœŸå‡ºç°é¢†åŸŸå¤–é—®é¢˜[9]ã€‚æ ¹æ®LlamaIndexçš„å®éªŒè¯æ˜ï¼Œå¾®è°ƒåµŒå…¥æ¨¡å‹å¯èƒ½å¯¼è‡´æ£€ç´¢è¯„ä¼°æŒ‡æ ‡æé«˜5-10% [2]ã€‚

ä½†ä¸æ˜¯æ‰€æœ‰åµŒå…¥æ¨¡å‹éƒ½å¯ä»¥è¿›è¡Œå¾®è°ƒï¼ˆä¾‹å¦‚ï¼Œç›®å‰æ— æ³•å¯¹OpenAIçš„text-ebmedding-ada-002è¿›è¡Œå¾®è°ƒï¼‰ã€‚

### å…ƒæ•°æ®

å½“æŠŠå‘é‡åµŒå…¥å­˜å‚¨åœ¨å‘é‡æ•°æ®åº“ä¸­æ—¶ï¼Œä¸€äº›å‘é‡æ•°æ®åº“å¯ä»¥å°†å®ƒä»¬ä¸å…ƒæ•°æ®ï¼ˆæˆ–æœªå‘é‡åŒ–çš„æ•°æ®ï¼‰ä¸€èµ·å­˜å‚¨ã€‚ä½¿ç”¨å…ƒæ•°æ®æ³¨é‡Šå‘é‡åµŒå…¥å¯ä»¥å¯¹æœç´¢ç»“æœè¿›è¡Œåå¤„ç†ï¼Œä¾‹å¦‚å…ƒæ•°æ®è¿‡æ»¤[1, 3, 8, 9]ï¼Œæˆ–è€…æ·»åŠ æ—¥æœŸã€ç« èŠ‚æˆ–å­ç« èŠ‚å¼•ç”¨ç­‰å…ƒæ•°æ®ã€‚

### å¤šç´¢å¼•

å¦‚æœå…ƒæ•°æ®ä¸è¶³ä»¥åœ¨é€»è¾‘ä¸ŠåŒºåˆ†ä¸åŒç±»å‹çš„ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨å¤šç´¢å¼•[1, 9]ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä¸ºä¸åŒç±»å‹çš„æ–‡æ¡£ä½¿ç”¨ä¸åŒçš„ç´¢å¼•ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‚¨ä¼šéœ€è¦åœ¨æ£€ç´¢æ—¶è¿›è¡Œä¸€äº›ç´¢å¼•è·¯ç”±[1, 9]ã€‚å¦‚æœæ‚¨å¯¹å…ƒæ•°æ®å’Œç‹¬ç«‹é›†åˆ(separate collections)æ„Ÿå…´è¶£ï¼Œæ‚¨å¯èƒ½ä¹Ÿä¼šæƒ³è¦äº†è§£[åŸç”Ÿå¤šç§Ÿæˆ·](https://www.youtube.com/watch?v=KT2RFMTJKGs)ã€‚

### ç´¢å¼•ç®—æ³•

ä¸ºäº†åœ¨å¤§è§„æ¨¡æƒ…å†µä¸‹å®ç°å¿«é€Ÿç›¸ä¼¼æ€§æœç´¢ï¼Œå‘é‡æ•°æ®åº“å’Œå‘é‡ç´¢å¼•åº“ä½¿ç”¨çš„æ˜¯è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ï¼ˆApproximate Nearest Neighborï¼ŒANNï¼‰è€Œä¸æ˜¯kæœ€è¿‘é‚»æœç´¢ï¼ˆk-nearest neighborï¼ŒkNNï¼‰ã€‚é¡¾åæ€ä¹‰ï¼ŒANNç®—æ³•è¿‘ä¼¼æœ€è¿‘é‚»ï¼Œå› æ­¤å¯èƒ½æ¯”kNNç®—æ³•ç²¾åº¦ç•¥ä½ã€‚

å…¶ä¸­ï¼Œæœ‰è®¸å¤šä¸åŒçš„ANNç®—æ³•ï¼Œä¾‹å¦‚Facebook Faissï¼ˆèšç±»ï¼‰ã€Spotify Annoyï¼ˆæ ‘ï¼‰ã€Google ScaNNï¼ˆå‘é‡å‹ç¼©ï¼‰å’ŒHNSWLIBï¼ˆæ¥è¿‘å›¾ï¼‰ã€‚è¿™äº›ANNç®—æ³•ä¸€èˆ¬éƒ½æœ‰å¯ä»¥è°ƒæ•´çš„å‚æ•°ï¼Œæ¯”å¦‚HNSWä¸­çš„efã€efConstructionå’ŒmaxConnections [1]ã€‚

æ­¤å¤–ï¼Œå¯ä»¥å¯¹ç´¢å¼•ç®—æ³•å¯ç”¨å‘é‡å‹ç¼©ï¼Œä½¿ç”¨å‘é‡å‹ç¼©ä¼šæŸå¤±ä¸€äº›ç²¾åº¦ã€‚ä½†æ˜¯ï¼Œä½ ä¹Ÿå¯ä»¥ï¼ˆæ ¹æ®åœºæ™¯ï¼‰å¯¹å‹ç¼©ç®—æ³•çš„é€‰æ‹©å’Œè°ƒæ•´è¿›è¡Œä¼˜åŒ–ã€‚

åœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œç®—æ³•çš„å‚æ•°é€šå¸¸å·²ç»ç”±æ•°æ®åº“ç ”ç©¶å›¢é˜Ÿåœ¨åŸºå‡†å®éªŒä¸­è¿›è¡Œè°ƒæ•´äº†ï¼ŒRAGç³»ç»Ÿçš„å¼€å‘äººå‘˜é€šå¸¸ä¸ä¼šæ”¹åŠ¨ã€‚ä½†å¦‚æœæ‚¨ç¡®å®æƒ³è¦å°è¯•è°ƒæ•´è¿™äº›å‚æ•°ï¼Œæˆ‘å»ºè®®ä»è¿™ç¯‡æ–‡ç« å¼€å§‹ï¼š[ã€Š**An Overview on RAG Evaluation**ã€‹](https://weaviate.io/blog/rag-evaluation?source=post_page-----7ca646833439--------------------------------#indexing-knobs)

## æ¨ç†é˜¶æ®µï¼ˆæ£€ç´¢ä¸ç”Ÿæˆï¼‰

RAGçš„ä¸»è¦ç»„æˆéƒ¨åˆ†æ˜¯**æ£€ç´¢**å’Œ**ç”Ÿæˆ**ã€‚æœ¬èŠ‚ä¸»è¦è®¨è®ºæå‡æ£€ç´¢æ•ˆæœçš„ç­–ç•¥ï¼ˆæŸ¥è¯¢è½¬æ¢ã€æ£€ç´¢å‚æ•°ã€é«˜çº§æ£€ç´¢ç­–ç•¥å’Œé‡æ–°æ’åºæ¨¡å‹ï¼‰ã€‚å› ä¸ºç›¸å¯¹äºç”Ÿæˆï¼Œæ£€ç´¢å¯¹ç»“æœçš„å½±å“æ›´å¤§ã€‚ä½†æ£€ç´¢ä¹Ÿä¼šç®€å•æ¶‰åŠåˆ°ä¸€äº›ç”Ÿæˆçš„ç­–ç•¥ï¼ˆLLMå’Œæç¤ºå·¥ç¨‹ï¼‰ã€‚

![](https://cdn.jsdelivr.net/gh/donttal/imgbed/img/df169d2835ef8cc082a4df513da05e74.webp)

RAGä¸­ï¼Œç”¨äºè·å–é¢å¤–ä¸Šä¸‹æ–‡çš„æœç´¢æŸ¥è¯¢ä¹Ÿè¢«åµŒå…¥åˆ°å‘é‡ç©ºé—´ä¸­ï¼Œå› æ­¤æŸ¥è¯¢çš„è¡¨è¾¾æ–¹å¼ä¼šå¯¹æœç´¢ç»“æœäº§ç”Ÿå½±å“ã€‚å¦‚æœæ‚¨çš„æœç´¢æŸ¥è¯¢æ²¡æœ‰å¾—åˆ°æ»¡æ„çš„ç»“æœï¼Œæ‚¨å¯ä»¥å°è¯•ä¸€äº›æŸ¥è¯¢è½¬æ¢æŠ€æœ¯[5, 8, 9]ï¼Œæ¯”å¦‚ï¼š

1. **é‡æ–°è¡¨è¾¾ï¼š** ä½¿ç”¨è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰é‡æ–°è¡¨è¾¾æŸ¥è¯¢ï¼Œç„¶åå†æ¬¡å°è¯•ã€‚
2. **å‡è®¾æ€§æ–‡æ¡£åµŒå…¥ï¼ˆHyDEï¼‰ï¼š** ä½¿ç”¨è¯­è¨€æ¨¡å‹ç”Ÿæˆå¯¹æœç´¢æŸ¥è¯¢çš„å‡è®¾å“åº”ï¼Œç„¶åå°†ä¸¤è€…ä¸€èµ·ç”¨äºæ£€ç´¢ã€‚
3. **å­æŸ¥è¯¢ï¼š** å°†è¾ƒé•¿çš„æŸ¥è¯¢åˆ†è§£ä¸ºå¤šä¸ªè¾ƒçŸ­çš„æŸ¥è¯¢ã€‚

æ£€ç´¢å‚æ•°

### æ£€ç´¢å‚æ•°

æ£€ç´¢æ˜¯RAGçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ä½ é¦–å…ˆè¦è€ƒè™‘çš„æ˜¯ï¼Œè¯­ä¹‰æœç´¢æ˜¯å¦è¶³å¤Ÿæ»¡è¶³ä½ çš„ç”¨ä¾‹ï¼Œæˆ–è€…ä½ æ˜¯å¦å¸Œæœ›ä½¿ç”¨æ··åˆæœç´¢ã€‚

åœ¨é‡‡ç”¨æ··åˆæœç´¢çš„æƒ…å†µä¸‹ï¼Œéœ€è¦å°è¯•è°ƒæ•´æ··åˆæœç´¢ä¸­ç¨€ç–å’Œå¯†é›†æ£€ç´¢æ–¹æ³•çš„åŠ æƒèšåˆ[1, 4, 9]ã€‚å› æ­¤ï¼Œè°ƒæ•´å‚æ•°alphaå°†å˜å¾—è‡³å…³é‡è¦ã€‚ï¼ˆalphaæ˜¯æ§åˆ¶è¯­ä¹‰æœç´¢æƒé‡çš„å‚æ•°ï¼Œalpha=1è¡¨ç¤ºå®Œå…¨è¯­ä¹‰æœç´¢ï¼Œalpha=0è¡¨ç¤ºåŸºäºå…³é”®è¯çš„æœç´¢ï¼‰

æ­¤å¤–ï¼Œæ£€ç´¢ç»“æœçš„æ•°é‡ä¹Ÿå¾ˆé‡è¦ã€‚æ£€ç´¢åˆ°çš„ã€Œä¸Šä¸‹æ–‡æ•°é‡ã€å°†å½±å“ã€Œæ‰€ä½¿ç”¨çš„ä¸Šä¸‹æ–‡çª—å£çš„é•¿åº¦ã€ï¼ˆè¯¦è§æç¤ºå·¥ç¨‹éƒ¨åˆ†ï¼‰ã€‚åŒæ—¶ï¼Œå¦‚æœä½¿ç”¨é‡æ’åºæ¨¡å‹ï¼Œæ‚¨éœ€è¦è€ƒè™‘å°†å¤šå°‘ä¸Šä¸‹æ–‡è¾“å…¥åˆ°æ¨¡å‹ä¸­ï¼ˆè¯¦è§é‡æ–°æ’åºæ¨¡å‹éƒ¨åˆ†ï¼‰ã€‚

è™½ç„¶è¯­ä¹‰æ£€ç´¢ç›¸ä¼¼æ€§åº¦é‡æ–¹å¼å¯ä»¥è®¾ç½®ï¼Œä½†åº”æ ¹æ®æ‰€ä½¿ç”¨çš„åµŒå…¥æ¨¡å‹æ¥ä¿®æ”¹ï¼Œè€Œä¸æ˜¯è¿›è¡Œä¸å¿…è¦çš„å®éªŒã€‚ä¾‹å¦‚ï¼Œtext-embedding-ada-002æ”¯æŒä½™å¼¦ç›¸ä¼¼åº¦ï¼Œè€Œmulti-qa-MiniLM-l6-cos-v1æ”¯æŒä½™å¼¦ç›¸ä¼¼åº¦ã€ç‚¹ç§¯å’Œæ¬§å‡ é‡Œå¾—è·ç¦»ã€‚

### é«˜çº§æ£€ç´¢ç­–ç•¥

ä»æŠ€æœ¯ä¸Šè®²ï¼Œè¿™ä¸€éƒ¨åˆ†æœ¬èº«å°±å¯ä»¥æˆä¸ºä¸€ç¯‡ç‹¬ç«‹çš„æ–‡ç« ã€‚åœ¨è¿™ä¸ªæ¦‚è§ˆä¸­ï¼Œæˆ‘ä»¬å°†ä¿æŒå°½å¯èƒ½ç®€æ´ã€‚å¦‚æœæ‚¨æƒ³æ·±å…¥äº†è§£ä»¥ä¸‹æŠ€æœ¯ï¼Œè¯·å‚è€ƒè¿™é—¨DeepLearning.AIè¯¾ç¨‹[ã€Š**Building and Evaluating Advanced RAG Applications**ã€‹](https://www.deeplearning.ai/short-courses/building-evaluating-advanced-rag/?source=post_page-----7ca646833439--------------------------------)ã€‚

åŸºæœ¬æ€æƒ³æ˜¯ï¼Œç”¨äºæ£€ç´¢çš„å—ä¸ä¸€å®šè¦ä¸ç”¨äºç”Ÿæˆçš„å—ç›¸åŒã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œä¼šæŠŠæ£€ç´¢åµŒå…¥ä¸ºè¾ƒå°çš„å—ï¼Œå»æ£€ç´¢è¾ƒå¤§çš„ä¸Šä¸‹æ–‡[7]ã€‚

- å¥å­çª—å£æ£€ç´¢(**Sentence-window retrieval**)ï¼šä¸ä»…æ£€ç´¢ç›¸å…³å¥å­ï¼Œè¿˜è¦æ£€ç´¢å¥å­ä¹‹å‰å’Œä¹‹åçš„çª—å£ã€‚
- è‡ªåŠ¨åˆå¹¶æ£€ç´¢(**Auto-merging retrieval**)ï¼šæ–‡æ¡£ä»¥ç±»ä¼¼æ ‘çŠ¶ç»“æ„ç»„ç»‡ã€‚æŸ¥è¯¢æ—¶ï¼Œå¯ä»¥å°†å•ç‹¬ä½†ç›¸å…³çš„è¾ƒå°å—åˆå¹¶æˆæ›´å¤§çš„ä¸Šä¸‹æ–‡ã€‚

### é‡æ’åºæ¨¡å‹

è¯­ä¹‰æœç´¢æ˜¯åŸºäºä¸Šä¸‹æ–‡ä¸æœç´¢æŸ¥è¯¢çš„è¯­ä¹‰ç›¸ä¼¼æ€§æ¥æ£€ç´¢çš„ï¼Œä½†**â€œæœ€ç›¸ä¼¼â€å¹¶ä¸ä¸€å®šæ„å‘³ç€â€œæœ€ç›¸å…³â€**ã€‚é‡æ’åºæ¨¡å‹ï¼Œä¾‹å¦‚Cohereçš„é‡æ’åºæ¨¡å‹ï¼Œå¯ä»¥é€šè¿‡è®¡ç®—æ¯ä¸ªæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¸æŸ¥è¯¢ç›¸å…³æ€§çš„åˆ†æ•°æ¥æ¶ˆé™¤ä¸ç›¸å…³çš„æœç´¢ç»“æœ[1, 9]ã€‚

å¦‚æœä½¿ç”¨é‡æ’åºæ¨¡å‹ï¼Œå¯èƒ½éœ€è¦é‡æ–°è°ƒæ•´è¾“å…¥åˆ°é‡æ’åºå™¨çš„**æœç´¢ç»“æœæ•°é‡**ï¼Œä»¥åŠæ‚¨å¸Œæœ›å°†å¤šå°‘ç»è¿‡é‡æ–°æ’åºçš„ç»“æœè¾“å…¥åˆ°LLMä¸­ã€‚

å’ŒåµŒå…¥æ¨¡å‹ä¸€æ ·ï¼Œæ‚¨å¯èƒ½éœ€è¦æ ¹æ®æ‚¨çš„ç”¨ä¾‹æ¥å¾®è°ƒé‡æ’åºæ¨¡å‹ã€‚

### å¤§è¯­è¨€æ¨¡å‹

LLMæ˜¯ç”Ÿæˆå“åº”çš„æ ¸å¿ƒç»„ä»¶ã€‚ç±»ä¼¼äºåµŒå…¥æ¨¡å‹ï¼Œæ ¹æ®æ‚¨çš„éœ€æ±‚ï¼ˆä¾‹å¦‚å¼€æ”¾å¼ä¸ä¸“æœ‰æ¨¡å‹ã€æ¨ç†æˆæœ¬ã€ä¸Šä¸‹æ–‡é•¿åº¦ç­‰[1]ï¼‰ï¼Œæœ‰å„ç§å„æ ·çš„LLMå¯ä¾›é€‰æ‹©ã€‚

ä¸åµŒå…¥æ¨¡å‹æˆ–é‡æ’åºæ¨¡å‹ä¸€æ ·ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°è¯•å¯¹LLMè¿›è¡Œå¾®è°ƒæ¥é€‚åº”ç‰¹å®šç”¨ä¾‹ã€‚

### æç¤ºå·¥ç¨‹

promptæå¤§åœ°å½±å“LLMçš„ç”Ÿæˆç»“æœ[1, 8, 9]ã€‚

> è¯·ä»…åŸºäºæä¾›çš„æœç´¢ç»“æœå›ç­”é—®é¢˜ï¼Œåˆ‡å‹¿å‚è€ƒå…¶ä»–ä¿¡æ¯ï¼
> 

> è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼æ‚¨çš„å›ç­”å¿…é¡»å»ºç«‹åœ¨æä¾›çš„æœç´¢ç»“æœä¹‹ä¸Šã€‚è¯·è§£é‡Šæ‚¨çš„ç­”æ¡ˆä¸ºä½•åŸºäºæœç´¢ç»“æœã€‚
> 

æ­¤å¤–ï¼Œåœ¨æç¤ºä¸­ä½¿ç”¨å°‘é‡ç¤ºä¾‹å¯ä»¥æé«˜å®Œæˆç»“æœçš„è´¨é‡ã€‚

ä¸Šä¸‹æ–‡é•¿åº¦æ˜¯ä¸€ä¸ªæ‚¨åº”è¯¥å°è¯•å®éªŒçš„å‚æ•°[1]ã€‚è™½ç„¶é€šè¿‡å¢åŠ ç›¸å…³ä¸Šä¸‹æ–‡å¯ä»¥æ”¹å–„RAGçš„æ€§èƒ½ï¼Œä½†å¦‚æœå°†ç›¸å…³ä¸Šä¸‹æ–‡æ”¾ç½®åœ¨è¿‡å¤šä¸Šä¸‹æ–‡çš„ä¸­é—´ï¼Œå¯èƒ½é‡åˆ°â€œä¸­é—´è¿·å¤±â€[6]æ•ˆåº”ï¼Œå³LLMå¯èƒ½æ— æ³•è¯†åˆ«ä¸­é—´ä½ç½®çš„ç›¸å…³ä¸Šä¸‹æ–‡ã€‚

## æ€»ç»“

éšç€è¶Šæ¥è¶Šå¤šçš„å¼€å‘äººå‘˜åœ¨åˆ›å»ºRAGæµç¨‹çš„åŸå‹æ–¹é¢ç§¯ç´¯ç»éªŒï¼Œè®¨è®ºå¦‚ä½•ä½¿RAGæµç¨‹è¾¾åˆ°æŠ•å…¥ç”Ÿäº§æ‰€éœ€çš„æ€§èƒ½å˜å¾—æ›´ä¸ºé‡è¦ã€‚æœ¬æ–‡é˜è¿°äº†åœ¨RAGè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æ ¹æ®é˜¶æ®µè°ƒæ•´çš„ä¸åŒâ€œè¶…å‚æ•°â€å’Œå…¶ä»–å‚æ•°ï¼š

æœ¬æ–‡æ¶µç›–äº†æ•°æ®ç´¢å¼•é˜¶æ®µä¸­çš„ç­–ç•¥ï¼š

- æ•°æ®æ¸…æ´—ï¼šç¡®ä¿æ•°æ®æ¸…æ´ä¸”æ­£ç¡®ã€‚
- åˆ‡å—ï¼šé€‰æ‹©åˆ‡å—æŠ€æœ¯ã€åˆ‡å—å¤§å°ï¼ˆchunk_sizeï¼‰å’Œåˆ‡å—é‡å ï¼ˆoverlapï¼‰ã€‚
- åµŒå…¥æ¨¡å‹ï¼šé€‰æ‹©åµŒå…¥æ¨¡å‹ï¼ŒåŒ…æ‹¬ç»´åº¦ï¼Œä»¥åŠæ˜¯å¦è¿›è¡Œå¾®è°ƒã€‚
- å…ƒæ•°æ®ï¼šæ˜¯å¦ä½¿ç”¨å…ƒæ•°æ®ä»¥åŠå…ƒæ•°æ®çš„é€‰æ‹©ã€‚
- å¤šç´¢å¼•ï¼šå†³å®šæ˜¯å¦ä¸ºä¸åŒçš„æ•°æ®é›†ä½¿ç”¨å¤šä¸ªç´¢å¼•ã€‚
- ç´¢å¼•ç®—æ³•ï¼šANNå’Œå‘é‡å‹ç¼©ç®—æ³•çš„é€‰æ‹©å’Œè°ƒæ•´æ˜¯å¯ä»¥è¿›è¡Œè°ƒæ•´çš„ï¼Œä½†é€šå¸¸ä¸ç”±RAGåº”ç”¨å¼€å‘è€…è¿›è¡Œè°ƒæ•´ã€‚

åœ¨æ¨ç†é˜¶æ®µï¼ˆæ£€ç´¢å’Œç”Ÿæˆï¼‰ä¸­ï¼Œæ¶‰åŠä»¥ä¸‹ç­–ç•¥ï¼š

- æŸ¥è¯¢è½¬æ¢ï¼šå°è¯•é‡æ–°è¡¨è¾¾ã€HyDEæˆ–å­æŸ¥è¯¢ã€‚
- æ£€ç´¢å‚æ•°ï¼šé€‰æ‹©æœç´¢æŠ€æœ¯ï¼ˆå¦‚æœå¯ç”¨æ··åˆæœç´¢ï¼Œåˆ™ä¸ºalphaï¼‰å’Œæ£€ç´¢åˆ°çš„æœç´¢ç»“æœæ•°é‡ã€‚
- é«˜çº§æ£€ç´¢ç­–ç•¥ï¼šæ˜¯å¦ä½¿ç”¨é«˜çº§æ£€ç´¢ç­–ç•¥ï¼Œå¦‚å¥å­çª—å£æˆ–è‡ªåŠ¨åˆå¹¶æ£€ç´¢ã€‚
- é‡æ’åºæ¨¡å‹ï¼šæ˜¯å¦ä½¿ç”¨é‡æ’åºæ¨¡å‹ï¼Œé‡æ’åºæ¨¡å‹çš„é€‰æ‹©ï¼Œè¾“å…¥åˆ°é‡æ’åºæ¨¡å‹çš„æœç´¢ç»“æœæ•°é‡ï¼Œä»¥åŠæ˜¯å¦å¯¹é‡æ’åºæ¨¡å‹è¿›è¡Œå¾®è°ƒã€‚
- LLMsï¼šLLMçš„é€‰æ‹©ä»¥åŠæ˜¯å¦å¯¹å…¶è¿›è¡Œå¾®è°ƒã€‚
- æç¤ºå·¥ç¨‹ï¼šå°è¯•ä¸åŒçš„æªè¾å’Œå°‘é‡ç¤ºä¾‹ã€‚

### å‚è€ƒæ–‡çŒ®

[1] [Connor Shorten](https://medium.com/u/59216259c525?source=post_page-----7ca646833439--------------------------------) and [Erika Cardenas](https://medium.com/u/91b27bdf28df?source=post_page-----7ca646833439--------------------------------) (2023). Weaviate Blog. [An Overview on RAG Evaluation](https://weaviate.io/blog/rag-evaluation) (accessed Nov. 27, 2023)

[2] [Jerry Liu](https://medium.com/u/e76da1c45ef7?source=post_page-----7ca646833439--------------------------------) (2023). LlamaIndex Blog. [Fine-Tuning Embeddings for RAG with Synthetic Data](https://blog.llamaindex.ai/fine-tuning-embeddings-for-rag-with-synthetic-data-e534409a3971) (accessed Nov. 28, 2023)

[3] LlamaIndex Documentation (2023).Â [Building Performant RAG Applications for Production](https://gpt-index.readthedocs.io/en/stable/optimizing/production_rag.html)Â (accessed Nov. 28, 2023)

[4] Voyage AI (2023).Â [Embeddings Drive the Quality of RAG: A Case Study of Chat.LangChain](https://blog.voyageai.com/2023/10/29/a-case-study-of-chat-langchain/)Â (accessed Dec. 5, 2023)

[5] LlamaIndex Documentation (2023).Â [Query Transformations](https://gpt-index.readthedocs.io/en/v0.6.9/how_to/query/query_transformations.html)Â (accessed Nov. 28, 2023)

[6] Liu, N. F., Lin, K., Hewitt, J., Paranjape, A., Bevilacqua, M., Petroni, F., & Liang, P. (2023). Lost in the middle: How language models use long contexts.Â *arXiv preprint arXiv:2307.03172*.

[7] DeepLearning.AI (2023).Â [Building and Evaluating Advanced RAG Applications](https://www.deeplearning.ai/short-courses/building-evaluating-advanced-rag/)Â (accessed Dec 4, 2023)

[8] [Ahmed Besbes](https://medium.com/u/adc8ea174c69?source=post_page-----7ca646833439--------------------------------) (2023). Towards Data Science. [Why Your RAG Is Not Reliable in a Production Environment](https://towardsdatascience.com/why-your-rag-is-not-reliable-in-a-production-environment-9e6a73b3eddb) (accessed Nov. 27, 2023)

[9] [Matt Ambrogi](https://medium.com/u/1e23ad8f92c5?source=post_page-----7ca646833439--------------------------------) (2023). Towards Data Science. [10 Ways to Improve the Performance of Retrieval Augmented Generation Systems](https://towardsdatascience.com/10-ways-to-improve-the-performance-of-retrieval-augmented-generation-systems-5fa2cee7cd5c) (accessed Nov. 27, 2023)

### å‚è€ƒå›¾ç‰‡

é™¤éå¦æœ‰è¯´æ˜ï¼Œæ‰€æœ‰å›¾ç‰‡å‡ç”±åŸä½œè€…åˆ›å»ºã€‚